<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hog Rider Runner ‚Äî Ultimate</title>
<style>
  /* --- Global Styles --- */
  body { margin:0; font-family:Arial,sans-serif; background:#121212; color:#eee; overflow-x:hidden; }
  button { font-family:inherit; font-size:14px; cursor:pointer; }

  /* --- Top Bar --- */
  .top { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background:#1c1c1c; border-bottom:2px solid #333; }
  .controls button { margin-left:10px; padding:6px 12px; background:#333; color:#eee; border:1px solid #555; border-radius:4px; }
  .controls button:hover { background:#444; }

  /* --- Game Area --- */
  #game-area { text-align:center; margin-top:20px; }
  canvas { background:#222; border:2px solid #555; border-radius:6px; }

  /* --- HUD --- */
  #hud { text-align:center; margin-top:10px; }
  #scoreText { font-weight:bold; margin-bottom:4px; }
  #tips { font-size:12px; color:#bbb; }

  /* --- Side Panel --- */
  .sidepanel { position:absolute; right:10px; top:70px; width:220px; background:#1c1c1c; padding:12px; border-radius:8px; border:1px solid #333; }
  .sidepanel h3 { margin-top:0; text-align:center; }
  #leadersList { padding-left:20px; margin:6px 0; }
  #submitScore input { width:100%; padding:5px; margin-bottom:4px; border-radius:4px; border:1px solid #555; background:#2c2c2c; color:#eee; }
  #submitScore button { width:100%; padding:6px; border-radius:4px; border:1px solid #555; background:#333; color:#eee; }
  #submitScore button:hover { background:#444; }
  .small { font-size:11px; color:#bbb; text-align:center; margin-top:6px; }

  /* --- Overlay --- */
  .overlay { display:flex; justify-content:center; align-items:center; position:fixed; inset:0; background:rgba(0,0,0,0.85); z-index:1000; }
  #overlayBox { background:#222; padding:25px 20px; border-radius:12px; text-align:center; max-width:350px; width:90%; border:2px solid #555; }
  #overlayBox h2 { margin-top:0; margin-bottom:10px; }
  #overlayBox p { font-size:14px; color:#ccc; line-height:1.4; margin-bottom:15px; }
  .overlay-buttons button { padding:8px 20px; border-radius:5px; border:1px solid #555; background:#333; color:#eee; }
  .overlay-buttons button:hover { background:#444; }
</style>
</head>
<body>
  <!-- Top Bar -->
  <div class="top">
    <h1>Hog Rider Runner ‚öîÔ∏è ‚Äî Ultimate</h1>
    <div class="controls">
      <button id="startBtn">Start</button>
      <button id="pauseBtn" style="display:none">Pause</button>
      <button id="muteBtn">üîä</button>
    </div>
  </div>

  <!-- Game Canvas -->
  <div id="game-area">
    <canvas id="gameCanvas" width="960" height="360"></canvas>
  </div>

  <!-- HUD -->
  <div id="hud">
    <div id="scoreText">Score: 0 ‚Ä¢ High: 0</div>
    <div id="tips">Space / Up / W = Jump ‚Ä¢ Down / S = Duck ‚Ä¢ Click / Tap canvas to jump</div>
  </div>

  <!-- Side Panel / Leaderboard -->
  <div class="sidepanel">
    <h3>Leaderboard</h3>
    <div id="leaderboard">
      <ol id="leadersList"><li>Loading...</li></ol>
    </div>
    <div id="submitScore">
      <input id="playerName" placeholder="Your name (max 16)" maxlength="16">
      <button id="submitBtn">Submit Score</button>
      <div id="submitMsg" class="small"></div>
    </div>
    <div class="small" style="margin-top:12px">
      Note: Leaderboard uses a sample REST API. Run the sample backend or point API_BASE to your server.
    </div>
  </div>

  <!-- Overlay / Start Screen -->
  <div id="overlay" class="overlay">
    <div id="overlayBox">
      <h2 id="overlayTitle">Hog Rider Runner</h2>
      <p id="overlayDesc">
        Run through the battlefield. Multiple enemies, power-ups, boss wave, and a cinematic rocket ending.
        Reach <strong>1200</strong> for boss; <strong>2000</strong> for rocket.
      </p>
      <div class="overlay-buttons">
        <button id="overlayStart">Begin</button>
      </div>
    </div>
  </div>

<script>
  // --- Canvas setup ---
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const overlayStart = document.getElementById('overlayStart');

  let isRunning = false;
  let score = 0;
  let highScore = 0;

  // --- Player ---
  const player = {
    x: 50,
    y: canvas.height - 60,
    width: 40,
    height: 40,
    color: '#ffcc00',
    dy: 0,
    gravity: 0.7,
    jumpPower: -12,
    grounded: true
  };

  // --- Enemy ---
  const enemies = [];
  const enemySpawnRate = 90; // frames
  let frameCount = 0;

  // --- Event Listeners ---
  document.addEventListener('keydown', (e) => {
    if (e.code === 'Space' || e.code === 'ArrowUp' || e.key.toLowerCase() === 'w') jump();
  });
  canvas.addEventListener('click', jump);

  function jump() {
    if (player.grounded) {
      player.dy = player.jumpPower;
      player.grounded = false;
    }
  }

  // --- Start / Pause ---
  startBtn.onclick = startGame;
  overlayStart.onclick = () => {
    document.getElementById('overlay').style.display = 'none';
    startGame();
  };
  pauseBtn.onclick = () => {
    isRunning = !isRunning;
    pauseBtn.innerText = isRunning ? 'Pause' : 'Resume';
    if (isRunning) requestAnimationFrame(gameLoop);
  };

  // --- Game Loop ---
  function startGame() {
    isRunning = true;
    score = 0;
    enemies.length = 0;
    startBtn.style.display = 'none';
    pauseBtn.style.display = 'inline';
    requestAnimationFrame(gameLoop);
  }

  function gameLoop() {
    if (!isRunning) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // --- Update Player ---
    player.dy += player.gravity;
    player.y += player.dy;
    if (player.y + player.height >= canvas.height - 10) {
      player.y = canvas.height - 10 - player.height;
      player.dy = 0;
      player.grounded = true;
    }

    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // --- Spawn enemies ---
    frameCount++;
    if (frameCount % enemySpawnRate === 0) {
      enemies.push({ x: canvas.width, y: canvas.height - 40, width: 30, height: 30, color:'#ff4444', speed:5 });
    }

    // --- Update enemies ---
    for (let i = enemies.length-1; i>=0; i--) {
      const e = enemies[i];
      e.x -= e.speed;
      ctx.fillStyle = e.color;
      ctx.fillRect(e.x, e.y, e.width, e.height);

      // Collision
      if (player.x < e.x+e.width && player.x+player.width > e.x && player.y < e.y+e.height && player.y+player.height > e.y) {
        gameOver();
        return;
      }

      if (e.x+e.width < 0) enemies.splice(i,1);
    }

    // --- Update Score ---
    score++;
    if (score > highScore) highScore = score;
    document.getElementById('scoreText').innerText = `Score: ${score} ‚Ä¢ High: ${highScore}`;

    requestAnimationFrame(gameLoop);
  }

  function gameOver() {
    isRunning = false;
    startBtn.style.display = 'inline';
    pauseBtn.style.display = 'none';
    alert(`Game Over! Your score: ${score}`);
  }
</script>
</body>
</html>
